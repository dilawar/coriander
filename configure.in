dnl Process this file with autoconf to produce a configure script.

AC_INIT(configure.in)
AM_INIT_AUTOMAKE(coriander, 0.20)
AM_CONFIG_HEADER(config.h)


dnl Pick up the Gnome macros.
AM_ACLOCAL_INCLUDE(macros)

GNOME_INIT
AC_ISC_POSIX
AC_PROG_CC
AC_PROG_CXX
AM_PROG_CC_STDC
AC_HEADER_STDC
AC_CHECK_HEADERS(X11/extensions/Xvlib.h)

GNOME_COMPILE_WARNINGS
GNOME_X_CHECKS

dnl Add the languages which your application supports here.
dnl ALL_LINGUAS=""
dnl AM_GNU_GETTEXT

dnl Set PACKAGE_LOCALE_DIR in config.h.
if test "x${prefix}" = "xNONE"; then
  AC_DEFINE_UNQUOTED(PACKAGE_LOCALE_DIR, "${ac_default_prefix}/${DATADIRNAME}/locale")
else
  AC_DEFINE_UNQUOTED(PACKAGE_LOCALE_DIR, "${prefix}/${DATADIRNAME}/locale")
fi

dnl Subst PACKAGE_PIXMAPS_DIR.
PACKAGE_PIXMAPS_DIR="`gnome-config --datadir`/pixmaps/${PACKAGE}"
AC_SUBST(PACKAGE_PIXMAPS_DIR)

AC_MSG_CHECKING(for XFree86 XvImage support)
 video_x11_xv=no
 AC_TRY_COMPILE([
  #include <X11/Xlib.h>
  #include <sys/ipc.h>
  #include <sys/shm.h>
  #include <X11/extensions/XShm.h>
  #include <X11/extensions/Xvlib.h>
 ],[
  XvImage *image;
 ],[
 video_x11_xv=yes
 ])
 AC_MSG_RESULT($video_x11_xv)
 if test x$video_x11_xv = xyes; then
  XV_LIB="-lXv"
 fi

AC_SUBST(XV_LIB)

# Check for ftplib
AC_CHECK_LIB(ftp, FtpInit,
             AC_DEFINE(HAVE_FTPLIB)
             FTP_LIB="-lftp",
             AC_MSG_RESULT(ftplib is required for ftp support, disabled))
AC_SUBST(FTP_LIB)

# Check for realproducersdk
AC_MSG_CHECKING(for Real Producer SDK)
 real_sdk=no
 AC_TRY_COMPILE([
	#include <realproducersdk/pncom.h>
	#include <realproducersdk/rmaerror.h>
	#include <realproducersdk/pnwintyp.h>
	#include <realproducersdk/engtypes.h>
	#include <realproducersdk/rmaenum.h>
	#include <realproducersdk/rmapckts.h>
	#include <realproducersdk/engstats.h>
	#include <realproducersdk/engcodec.h>
 ],[
  	IRMABuffer *pBuffer;
 ],[
 real_sdk=yes
 ])
 AC_MSG_RESULT($real_sdk)
 if test x$real_sdk = xyes; then
  AC_DEFINE(HAVE_REALLIB)	
  REAL_LIB="-L/usr/local/lib/realproducersdk -lenceng -ldl"
  REAL_INCLUDEDIR="-I/usr/local/include/realproducersdk"
 fi

AC_SUBST(REAL_LIB)
AC_SUBST(REAL_INCLUDEDIR)

dnl temporarily removed intl/Makefile and po/Makefile.in
AC_OUTPUT([
Makefile
macros/Makefile
src/Makefile
])

